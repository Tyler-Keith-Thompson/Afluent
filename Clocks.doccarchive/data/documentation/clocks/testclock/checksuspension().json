{"sections":[],"metadata":{"remoteSource":{"url":"https:\/\/github.com\/Tyler-Keith-Thompson\/Afluent\/blob\/main\/.build\/checkouts\/swift-clocks\/Sources\/Clocks\/TestClock.swift#L152","fileName":"TestClock.swift"},"roleHeading":"Instance Method","externalID":"s:6Clocks9TestClockC15checkSuspensionyyYaKF","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"checkSuspension","kind":"identifier"},{"kind":"text","text":"() "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"title":"checkSuspension()","role":"symbol","modules":[{"name":"Clocks"}],"symbolKind":"method","platforms":[{"deprecated":false,"introducedAt":"16.0","beta":false,"name":"iOS","unavailable":false},{"unavailable":false,"deprecated":false,"beta":false,"introducedAt":"13.0","name":"macOS"},{"beta":false,"name":"tvOS","unavailable":false,"deprecated":false,"introducedAt":"16.0"},{"introducedAt":"9.0","unavailable":false,"beta":false,"deprecated":false,"name":"watchOS"}]},"variants":[{"paths":["\/documentation\/clocks\/testclock\/checksuspension()"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"checkSuspension","kind":"identifier"},{"text":"() ","kind":"text"},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"}]}]},{"kind":"content","content":[{"level":2,"type":"heading","text":"Discussion","anchor":"discussion"},{"inlineContent":[{"type":"text","text":"This can be useful for proving that your feature will not perform any more time-based"},{"type":"text","text":" "},{"type":"text","text":"asynchrony. For example, the following will throw because the clock has an active suspension"},{"type":"text","text":" "},{"type":"text","text":"scheduled:"}],"type":"paragraph"},{"code":["let clock = TestClock()","Task {","  try await clock.sleep(for: .seconds(1))","}","try await clock.checkSuspension()"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"However, the following will not throw because advancing the clock has finished the suspension:","type":"text"}]},{"type":"codeListing","code":["let clock = TestClock()","Task {","  try await clock.sleep(for: .seconds(1))","}","await clock.advance(for: .seconds(1))","try await clock.checkSuspension()"],"syntax":"swift"}]}],"kind":"symbol","schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"type":"text","text":"Throws an error if there are active sleeps on the clock."}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Clocks\/documentation\/Clocks\/TestClock\/checkSuspension()"},"seeAlsoSections":[{"anchor":"Checking-for-suspension","generated":true,"title":"Checking for suspension","identifiers":["doc:\/\/Clocks\/documentation\/Clocks\/SuspensionError"]}],"hierarchy":{"paths":[["doc:\/\/Clocks\/documentation\/Clocks","doc:\/\/Clocks\/documentation\/Clocks\/TestClock"]]},"references":{"doc://Clocks/documentation/Clocks/SuspensionError":{"abstract":[{"text":"An error that indicates there are actively suspending sleeps scheduled on the clock.","type":"text"}],"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"SuspensionError"}],"type":"topic","url":"\/documentation\/clocks\/suspensionerror","role":"symbol","navigatorTitle":[{"text":"SuspensionError","kind":"identifier"}],"identifier":"doc:\/\/Clocks\/documentation\/Clocks\/SuspensionError","title":"SuspensionError","kind":"symbol"},"doc://Clocks/documentation/Clocks":{"title":"Clocks","abstract":[{"text":"A few clocks that make working with Swift concurrency more testable and more versatile.","type":"text"}],"identifier":"doc:\/\/Clocks\/documentation\/Clocks","type":"topic","url":"\/documentation\/clocks","kind":"symbol","role":"collection"},"doc://Clocks/documentation/Clocks/TestClock":{"navigatorTitle":[{"text":"TestClock","kind":"identifier"}],"title":"TestClock","abstract":[{"type":"text","text":"A clock whose time can be controlled in a deterministic manner."}],"identifier":"doc:\/\/Clocks\/documentation\/Clocks\/TestClock","type":"topic","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"TestClock"}],"url":"\/documentation\/clocks\/testclock","kind":"symbol","role":"symbol"},"doc://Clocks/documentation/Clocks/TestClock/checkSuspension()":{"identifier":"doc:\/\/Clocks\/documentation\/Clocks\/TestClock\/checkSuspension()","abstract":[{"text":"Throws an error if there are active sleeps on the clock.","type":"text"}],"kind":"symbol","type":"topic","title":"checkSuspension()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"checkSuspension","kind":"identifier"},{"text":"() ","kind":"text"},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"}],"role":"symbol","url":"\/documentation\/clocks\/testclock\/checksuspension()"}}}